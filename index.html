<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>MiniMarket PRO</title>

<link rel="manifest" href="manifest.json">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  body {
    background: #f2f2f2;
    font-family: 'Arial Rounded MT', sans-serif;
  }

  /* HEADER */
  .top-banner {
    background: linear-gradient(135deg, #00b894, #019874);
    padding: 30px 20px;
    color: white;
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    position: relative;
  }

  .banner-title {
    font-size: 28px;
    font-weight: bold;
  }

  .btn-dark-mode {
    position: absolute;
    top: 15px;
    right: 15px;
  }

  /* PRODUCT CARDS */
  .product-card {
    border-radius: 18px;
    background: white;
    padding: 12px;
    height: 100%;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    transition: transform 0.2s;
  }

  .product-card:hover {
    transform: scale(1.03);
  }

  .product-card img {
    width: 100%;
    border-radius: 15px;
    height: 160px;
    object-fit: cover;
  }

  .price-tag {
    background: #00b894;
    color: white;
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: bold;
  }

  .btn-add {
    background: #00b894;
    border: none;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    color: white;
    font-size: 22px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* BOT√ìN FLOTANTE */
  .btn-cart {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background: #fdcb6e;
    color: #2d3436;
    border: none;
    border-radius: 50%;
    width: 70px;
    height: 70px;
    font-size: 28px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    z-index: 999;
  }

  /* DARK MODE */
  body.dark {
    background: #1e1e1e;
    color: #eee;
  }

  .dark .product-card {
    background: #2b2b2b;
    box-shadow: 0 0 15px rgba(255,255,255,0.05);
  }

  .dark .top-banner {
    background: linear-gradient(135deg, #202020, #111);
  }

  .dark .price-tag {
    background: #444;
  }
</style>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</head>

<body>

<!-- HEADER -->
<div class="top-banner mb-4">
  
  <button onclick="toggleDark()" 
          class="btn btn-light btn-sm btn-dark-mode">
      üåô
  </button>

  <button onclick="logout()"
        class="btn btn-danger btn-sm position-absolute"
        style="top:15px; left:15px;">
    Salir
  </button>

  <div class="banner-title">üõí MiniMarket</div>
  <div>Compra r√°pido y f√°cil</div>

  <div class="container mb-2">
    <div id="userInfo" class="text-end small text-muted"></div>
  </div>
</div>

<script>
const u = JSON.parse(localStorage.getItem("usuario"));
if(u){
  document.getElementById("userInfo").innerHTML =
    "üë§ " + u.nombre + " ‚Ä¢ " + u.telefono;
}
</script>

<!-- CATEGOR√çAS -->
<div class="container mb-3">
  <div class="d-flex gap-2 overflow-auto pb-2">
    <button class="btn btn-outline-success" onclick="filtrarCat('Todos')">Todos</button>
    <button class="btn btn-outline-success" onclick="filtrarCat('Bebidas')">Bebidas</button>
    <button class="btn btn-outline-success" onclick="filtrarCat('Panader√≠a')">Panader√≠a</button>
    <button class="btn btn-outline-success" onclick="filtrarCat('Abarrotes')">Abarrotes</button>
  </div>
</div>

<!-- DELIVERY / RETIRO -->
<div class="container mb-3">
  <select id="tipoPedido" class="form-select form-select-lg">
    <option value="retiro">üè™ Retiro en tienda</option>
    <option value="delivery">üõµ Delivery</option>
  </select>
</div>

<!-- BUSCADOR -->
<div class="container mb-3">
  <input type="text" id="buscar" class="form-control form-control-lg"
         placeholder="üîç Buscar productos..."
         oninput="filtrarProductos(this.value)">
</div>

<!-- PRODUCTOS -->
<div class="container mb-5">
  <div class="row g-4" id="productos"></div>
</div>

<!-- Carrito flotante -->
<a class="btn-cart" href="carrito.html">üõç</a>

<script src="app.js"></script>

</body>

<script>
// Redirecci√≥n si no est√° logueado
if (!localStorage.getItem("usuario")) {
  window.location.href = "login.html";
}
</script>

</html>
