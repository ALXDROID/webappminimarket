<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login â€¢ MiniMarket</title>
<link rel="manifest" href="manifest.json">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  background: linear-gradient(135deg, #00b894, #019874);
  font-family: 'Arial Rounded MT', sans-serif;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.login-box {
  background: white;
  padding: 30px;
  border-radius: 20px;
  width: 90%;
  max-width: 380px;
  box-shadow: 0px 6px 20px rgba(0,0,0,0.25);
}

.login-box h2 {
  font-weight: bold;
  margin-bottom: 20px;
  text-align: center;
}

.btn-login {
  background: #00b894;
  color: white;
  font-size: 20px;
  padding: 12px;
  border-radius: 10px;
  border: none;
}

</style>
</head>

<body>

<div class="login-box">
  <h2>Bienvenido ðŸ‘‹</h2>

  <input id="nombre" class="form-control form-control-lg mb-3"
         placeholder="Tu nombre">

  <input id="telefono" type="tel" class="form-control form-control-lg mb-4"
         placeholder="TelÃ©fono">

  <button onclick="login()" class="btn btn-login w-100">Ingresar</button>
</div>
<script>
async function login(){
  const nombre = document.getElementById("nombre").value.trim();
  const telefono = document.getElementById("telefono").value.trim();

  if(nombre === "" || telefono === ""){
    alert("Completa todos los campos");
    return;
  }

  try {
    const res = await fetch("http://www.marketapp.kesug.com/api/login.php", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ nombre, telefono })
    });

    const data = await res.json();

    if (!data.success) {
      alert("Error: " + (data.error || "No se pudo iniciar sesiÃ³n"));
      return;
    }

    // Guardar usuario REAL
    localStorage.setItem("usuario", JSON.stringify({
      id: data.id,
      nombre: nombre,
      telefono: telefono
    }));

    window.location.href = "index.html";

  } catch (e) {
    alert("Error conectando con el servidor");
  }
}

</script>

<!-- <script>
function login(){
  const nombre = document.getElementById("nombre").value.trim();
  const telefono = document.getElementById("telefono").value.trim();

  if(nombre === "" || telefono === ""){
    alert("Completa todos los campos");
    return;
  }

  const usuario = { nombre, telefono };
  localStorage.setItem("usuario", JSON.stringify(usuario));

  window.location.href = "index.html";
}
</script> -->

</body>
</html>
